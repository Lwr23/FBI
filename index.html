<!DOCTYPE html>
<html lang="ar">
<head>
  <meta charset="UTF-8">
  <title>FBI FiveM</title>
</head>
<body>
  <h1> FBI – Titans</h1>
  <p>FBIمرحبًا بك في النظام</p>
</body>
</html>
<!DOCTYPE html>
<html>
<head>
  <title>Login - FBI</title>
  <script src="https://www.gstatic.com/firebasejs/9.22.1/firebase-app.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.22.1/firebase-auth.js"></script>
  <script src="firebase-config.js"></script>
</head>
<body>
  <h1>FBI Login</h1>
  <input type="email" id="email" placeholder="Email">
  <input type="password" id="password" placeholder="Password">
  <button onclick="login()">Login</button>

  <script>
    function login() {
      const email = document.getElementById("email").value;
      const password = document.getElementById("password").value;

      auth.signInWithEmailAndPassword(email, password)
        .then(userCredential => {
          alert("Logged in successfully!");
          window.location.href = "dashboard.html";
        })
        .catch(error => {
          alert(error.message);
        });
    }
  </script>
</body>
</html>
<script>
  auth.onAuthStateChanged(user => {
    if(user){
      const uid = user.uid;
      db.collection("users").doc(uid).get()
        .then(doc => {
          if(doc.exists){
            const data = doc.data();
            const rank = data.rank;
            const permissions = data.permissions;

            // مثال: توجيه حسب الرتبة
            if(rank === "Director"){
              window.location.href = "admin.html"; // لوحة الإدارة
            } else {
              window.location.href = "agent_dashboard.html"; // المستخدم العادي
            }

          } else {
            alert("User data not found!");
          }
        });
    } else {
      window.location.href = "login.html"; // إذا ما سجل دخول
    }
  });
</script>
<button id="deleteUserBtn">Delete User</button>

<script>
  // بعد جلب بيانات المستخدم
  if(!permissions.deleteUsers){
    document.getElementById("deleteUserBtn").style.display = "none";
  }
</script>
<!DOCTYPE html>
<html>
<head>
  <title>FBI Application</title>
  <script src="https://www.gstatic.com/firebasejs/9.22.1/firebase-app.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.22.1/firebase-auth.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.22.1/firebase-firestore.js"></script>
  <script src="firebase-config.js"></script>
</head>
<body>
  <h1>FBI Application</h1>
  <input type="text" id="name" placeholder="Full Name">
  <input type="number" id="age" placeholder="Age">
  <input type="text" id="experience" placeholder="Experience">
  <input type="text" id="steam" placeholder="Steam ID">
  <input type="text" id="discord" placeholder="Discord Tag">
  <button onclick="submitApplication()">Submit Application</button>

  <script>
    function submitApplication(){
      const user = auth.currentUser;
      if(!user) return alert("You must be logged in!");

      const appData = {
        name: document.getElementById("name").value,
        age: document.getElementById("age").value,
        experience: document.getElementById("experience").value,
        steam: document.getElementById("steam").value,
        discord: document.getElementById("discord").value,
        status: "pending",
        submittedBy: user.uid
      };

      db.collection("applications").add(appData)
        .then(() => alert("Application submitted successfully!"))
        .catch(err => alert(err.message));
    }
  </script>
</body>
</html>
<div id="applicationsList"></div>

<script>
auth.onAuthStateChanged(user => {
  if(!user) return window.location.href="login.html";

  db.collection("users").doc(user.uid).get()
    .then(doc => {
      if(doc.exists){
        const rank = doc.data().rank;
        if(rank === "Agent" || rank === "Trainee") return alert("No access!");

        // جلب جميع التقديمات
        db.collection("applications").get()
          .then(snapshot => {
            snapshot.forEach(doc => {
              const app = doc.data();
              const id = doc.id;

              const div = document.createElement("div");
              div.innerHTML = `
                <p>${app.name} - ${app.status}</p>
                <button onclick="updateStatus('${id}', 'accepted')">Accept</button>
                <button onclick="updateStatus('${id}', 'rejected')">Reject</button>
              `;
              document.getElementById("applicationsList").appendChild(div);
            });
          });
      }
    });
});

function updateStatus(id, status){
  db.collection("applications").doc(id).update({status: status})
    .then(() => alert("Status updated!"));
}
</script>



<!DOCTYPE html>
<html lang="ar">
<head>
  <meta charset="UTF-8">
  <title>FBI Admin Panel</title>
  <link rel="stylesheet" href="css/style.css">

  <!-- Firebase -->
  <script src="https://www.gstatic.com/firebasejs/9.22.1/firebase-app.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.22.1/firebase-auth.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.22.1/firebase-firestore.js"></script>
</head>

<body class="admin-body">

  <h1>لوحة إدارة FBI</h1>

  <table id="applicationsTable">
    <thead>
      <tr>
        <th>الاسم</th>
        <th>العمر</th>
        <th>Steam</th>
        <th>Discord</th>
        <th>الحالة</th>
        <th>تحكم</th>
      </tr>
    </thead>
    <tbody>
      <!-- الطلبات تنحط هنا -->
    </tbody>
  </table>

  <script src="js/firebase.js"></script>
  <script src="js/admin.js"></script>
</body>
</html>
      <td>${data.name}</td>
      <td>${data.age}</td>
      <td>${data.steam}</td>
      <td>${data.discord}</td>
      <td>${data.status}</td>
      <td>
        <button class="accept">قبول</button>
        <button class="reject">رفض</button>
      </td>
  <script type="module" src="js/auth-check.js"></script>

<SCRIPT
async function giveRole(discordId) {
  const guild = await client.guilds.fetch("GUILD_ID");
  const member = await guild.members.fetch(discordId);
  await member.roles.add("ROLE_ID");
}
<SCRIPT
const { Client, GatewayIntentBits } = require("discord.js");
const client = new Client({ intents: [GatewayIntentBits.Guilds] });

client.login("BOT_TOKEN");

client.on("ready", () => {
  console.log("FBI Bot Ready");
});

app.post("/accept", (req, res) => {
  giveRole(req.body.discordId);
  res.send("Role Given");
});
<div class="stats">
  <div class="card pending">Pending: <span id="pending"></span></div>
  <div class="card accepted">Accepted: <span id="accepted"></span></div>
  <div class="card rejected">Rejected: <span id="rejected"></span></div>
</div>
let p=0,a=0,r=0;

querySnapshot.forEach(d=>{
  if(d.data().status==="pending") p++;
  if(d.data().status==="accepted") a++;
  if(d.data().status==="rejected") r++;
});

pending.innerText=p;
accepted.innerText=a;
rejected.innerText=r;
{
  email: "leader@fbi.com",
  rank: "Director"
}
if(adminRank !== "Director") {
  deleteBtn.style.display = "none";
}
await updateDoc(doc(db,"applications",id),{
  status,
  note: noteInput.value
});
onSnapshot(collection(db,"admin_logs"), (snap)=>{
  // update UI
});
allow write: if request.auth.token.rank == "Director";
fbi-system/
│
├── backend/
│   ├── server.js
│   ├── config/
│   │   └── db.js
│   ├── routes/
│   │   ├── auth.js
│   │   ├── cases.js
│   │   └── criminals.js
│   └── middleware/
│       └── auth.js
│
├── frontend/
│   ├── login.html
│   ├── dashboard.html
│   ├── css/
│   │   └── style.css
│   └── js/
│       └── main.js
│
└── database.sql
CREATE TABLE users (
  id INT AUTO_INCREMENT PRIMARY KEY,
  username VARCHAR(50),
  password VARCHAR(255),
  rank VARCHAR(20)
);

CREATE TABLE cases (
  id INT AUTO_INCREMENT PRIMARY KEY,
  title VARCHAR(100),
  description TEXT,
  status VARCHAR(20),
  agent VARCHAR(50)
);

CREATE TABLE criminals (
  id INT AUTO_INCREMENT PRIMARY KEY,
  name VARCHAR(100),
  charges TEXT,
  danger_level VARCHAR(20)
);
// backend/server.js
const express = require('express');
const app = express();
const cors = require('cors');

app.use(cors());
app.use(express.json());

app.listen(3000, () => {
  console.log("FBI System running on port 3000");
});
body {
  background: #0b0f1a;
  color: #fff;
  font-family: Arial;
}
.card {
  background: #111827;
  padding: 20px;
  border-radius: 10px;
}
CREATE TABLE users (
  id INT AUTO_INCREMENT PRIMARY KEY,
  username VARCHAR(50) UNIQUE,
  password VARCHAR(255),
  rank ENUM('Director','Agent') DEFAULT 'Agent'
);
// backend/config/db.js
const mysql = require('mysql2');

const db = mysql.createConnection({
  host: 'localhost',
  user: 'root',
  password: '',
  database: 'fbi_system'
});

db.connect(err => {
  if (err) throw err;
  console.log('Database Connected');
});

module.exports = db;
// backend/routes/auth.js
const express = require('express');
const bcrypt = require('bcrypt');
const router = express.Router();
const db = require('../config/db');

router.post('/login', (req, res) => {
  const { username, password } = req.body;

  db.query(
    'SELECT * FROM users WHERE username = ?',
    [username],
    async (err, result) => {
      if (result.length === 0)
        return res.status(401).json({ msg: 'المستخدم غير موجود' });

      const user = result[0];
      const match = await bcrypt.compare(password, user.password);

      if (!match)
        return res.status(401).json({ msg: 'كلمة المرور خاطئة' });

      res.json({
        msg: 'تم تسجيل الدخول بنجاح',
        rank: user.rank
      });
    }
  );
});

module.exports = router;
// backend/server.js
const express = require('express');
const app = express();
const cors = require('cors');

app.use(cors());
app.use(express.json());

app.use('/api/auth', require('./routes/auth'));

app.listen(3000, () => {
  console.log('FBI System Running');
});
<!-- frontend/login.html -->
<!DOCTYPE html>
<html lang="ar">
<head>
<meta charset="UTF-8">
<title>نظام FBI</title>
<link rel="stylesheet" href="css/style.css">
</head>
<body>

<div class="card">
  <h2>تسجيل دخول FBI</h2>
  <input id="username" placeholder="اسم المستخدم">
  <input id="password" type="password" placeholder="كلمة المرور">
  <button onclick="login()">دخول</button>
  <p id="msg"></p>
</div>

<script>
async function login() {
  const res = await fetch('http://localhost:3000/api/auth/login', {
    method: 'POST',
    headers: {'Content-Type':'application/json'},
    body: JSON.stringify({
      username: username.value,
      password: password.value
    })
  });
  const data = await res.json();
  msg.innerText = data.msg;
}
</script>

</body>
</html>
