<!DOCTYPE html>
<html lang="ar">
<head>
  <meta charset="UTF-8">
  <title>FBI FiveM</title>
</head>
<body>
  <h1> FBI – Titans</h1>
  <p>FBIمرحبًا بك في النظام</p>
</body>
</html>
<!DOCTYPE html>
<html>
<head>
  <title>Login - FBI</title>
  <script src="https://www.gstatic.com/firebasejs/9.22.1/firebase-app.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.22.1/firebase-auth.js"></script>
  <script src="firebase-config.js"></script>
</head>
<body>
  <h1>FBI Login</h1>
  <input type="email" id="email" placeholder="Email">
  <input type="password" id="password" placeholder="Password">
  <button onclick="login()">Login</button>

  <script>
    function login() {
      const email = document.getElementById("email").value;
      const password = document.getElementById("password").value;

      auth.signInWithEmailAndPassword(email, password)
        .then(userCredential => {
          alert("Logged in successfully!");
          window.location.href = "dashboard.html";
        })
        .catch(error => {
          alert(error.message);
        });
    }
  </script>
</body>
</html>
<script>
  auth.onAuthStateChanged(user => {
    if(user){
      const uid = user.uid;
      db.collection("users").doc(uid).get()
        .then(doc => {
          if(doc.exists){
            const data = doc.data();
            const rank = data.rank;
            const permissions = data.permissions;

            // مثال: توجيه حسب الرتبة
            if(rank === "Director"){
              window.location.href = "admin.html"; // لوحة الإدارة
            } else {
              window.location.href = "agent_dashboard.html"; // المستخدم العادي
            }

          } else {
            alert("User data not found!");
          }
        });
    } else {
      window.location.href = "login.html"; // إذا ما سجل دخول
    }
  });
</script>
<button id="deleteUserBtn">Delete User</button>

<script>
  // بعد جلب بيانات المستخدم
  if(!permissions.deleteUsers){
    document.getElementById("deleteUserBtn").style.display = "none";
  }
</script>
<!DOCTYPE html>
<html>
<head>
  <title>FBI Application</title>
  <script src="https://www.gstatic.com/firebasejs/9.22.1/firebase-app.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.22.1/firebase-auth.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.22.1/firebase-firestore.js"></script>
  <script src="firebase-config.js"></script>
</head>
<body>
  <h1>FBI Application</h1>
  <input type="text" id="name" placeholder="Full Name">
  <input type="number" id="age" placeholder="Age">
  <input type="text" id="experience" placeholder="Experience">
  <input type="text" id="steam" placeholder="Steam ID">
  <input type="text" id="discord" placeholder="Discord Tag">
  <button onclick="submitApplication()">Submit Application</button>

  <script>
    function submitApplication(){
      const user = auth.currentUser;
      if(!user) return alert("You must be logged in!");

      const appData = {
        name: document.getElementById("name").value,
        age: document.getElementById("age").value,
        experience: document.getElementById("experience").value,
        steam: document.getElementById("steam").value,
        discord: document.getElementById("discord").value,
        status: "pending",
        submittedBy: user.uid
      };

      db.collection("applications").add(appData)
        .then(() => alert("Application submitted successfully!"))
        .catch(err => alert(err.message));
    }
  </script>
</body>
</html>
<div id="applicationsList"></div>

<script>
auth.onAuthStateChanged(user => {
  if(!user) return window.location.href="login.html";

  db.collection("users").doc(user.uid).get()
    .then(doc => {
      if(doc.exists){
        const rank = doc.data().rank;
        if(rank === "Agent" || rank === "Trainee") return alert("No access!");

        // جلب جميع التقديمات
        db.collection("applications").get()
          .then(snapshot => {
            snapshot.forEach(doc => {
              const app = doc.data();
              const id = doc.id;

              const div = document.createElement("div");
              div.innerHTML = `
                <p>${app.name} - ${app.status}</p>
                <button onclick="updateStatus('${id}', 'accepted')">Accept</button>
                <button onclick="updateStatus('${id}', 'rejected')">Reject</button>
              `;
              document.getElementById("applicationsList").appendChild(div);
            });
          });
      }
    });
});

function updateStatus(id, status){
  db.collection("applications").doc(id).update({status: status})
    .then(() => alert("Status updated!"));
}
</script>



<!DOCTYPE html>
<html lang="ar">
<head>
  <meta charset="UTF-8">
  <title>FBI Admin Panel</title>
  <link rel="stylesheet" href="css/style.css">

  <!-- Firebase -->
  <script src="https://www.gstatic.com/firebasejs/9.22.1/firebase-app.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.22.1/firebase-auth.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.22.1/firebase-firestore.js"></script>
</head>

<body class="admin-body">

  <h1>لوحة إدارة FBI</h1>

  <table id="applicationsTable">
    <thead>
      <tr>
        <th>الاسم</th>
        <th>العمر</th>
        <th>Steam</th>
        <th>Discord</th>
        <th>الحالة</th>
        <th>تحكم</th>
      </tr>
    </thead>
    <tbody>
      <!-- الطلبات تنحط هنا -->
    </tbody>
  </table>

  <script src="js/firebase.js"></script>
  <script src="js/admin.js"></script>
</body>
</html>
      <td>${data.name}</td>
      <td>${data.age}</td>
      <td>${data.steam}</td>
      <td>${data.discord}</td>
      <td>${data.status}</td>
      <td>
        <button class="accept">قبول</button>
        <button class="reject">رفض</button>
      </td>
  <script type="module" src="js/auth-check.js"></script>

<SCRIPT
async function giveRole(discordId) {
  const guild = await client.guilds.fetch("GUILD_ID");
  const member = await guild.members.fetch(discordId);
  await member.roles.add("ROLE_ID");
}
<SCRIPT
const { Client, GatewayIntentBits } = require("discord.js");
const client = new Client({ intents: [GatewayIntentBits.Guilds] });

client.login("BOT_TOKEN");

client.on("ready", () => {
  console.log("FBI Bot Ready");
});

app.post("/accept", (req, res) => {
  giveRole(req.body.discordId);
  res.send("Role Given");
});
<div class="stats">
  <div class="card pending">Pending: <span id="pending"></span></div>
  <div class="card accepted">Accepted: <span id="accepted"></span></div>
  <div class="card rejected">Rejected: <span id="rejected"></span></div>
</div>
let p=0,a=0,r=0;

querySnapshot.forEach(d=>{
  if(d.data().status==="pending") p++;
  if(d.data().status==="accepted") a++;
  if(d.data().status==="rejected") r++;
});

pending.innerText=p;
accepted.innerText=a;
rejected.innerText=r;
{
  email: "leader@fbi.com",
  rank: "Director"
}
if(adminRank !== "Director") {
  deleteBtn.style.display = "none";
}
await updateDoc(doc(db,"applications",id),{
  status,
  note: noteInput.value
});
onSnapshot(collection(db,"admin_logs"), (snap)=>{
  // update UI
});
allow write: if request.auth.token.rank == "Director";
